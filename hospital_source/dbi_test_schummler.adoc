= XPath, XQuery and XSD

== XPath

=== Command Overview

<foo baz="5"><bar>25</bar></foo>

|===
|Command |Meaning

|/foo/bar
|Selects all bar's of foo (with foo as a parent of bar)

|//bar
|Select all bar’s (in the whole document

|/foo[bar>20]
|Sub-Element (child) condition for foo filtering

|foo[@baz<10]
|Attribute condition for foo filtering

|last()
|Gets the last element
|===


== XQuery

XQuery is a superset of XPath

=== Quick overview
----
for $x in doc("books.xml")/books/book
where $x/price>30
order by $x/title
return $x/title
----

=== FLOWR

* For
* Let
* Where
* Order
* Return


=== Command Overview

|===
|Command |Meaning

|for $x in [doc() ¦ XPath expr.]
|Define data source and ’row’ variable

|let $n := <a value>
|Assigns a value (values) to a variable

|where $x <condition>
|Filters ’rows’ fulfilling the condition

|order by $x [descending]
|Orders the remaining ’rows’

|return $x[/foo ¦ /@bar]
|Returns the ’row’ or a subset of it

|functx:line-count($x)
|Returns the line count

|sum()
|Returns the sum

|===

=== Examples

----
for $b in //book
where $b/@id = 2 or $b/year > 2015
return $b/title
----

-> Returns the titles of the books which have the id 2 or were written after 2015


----
for $b in //book
where fn:tokenize($b/[author])[2] = ’Knuth’
return ($b/price, $b/year)
----

-> You can return multiple values
